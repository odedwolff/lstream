<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AJAX Example</title>
</head>

<body>
    <button id="send-button" onclick="testSendAjax()">Send AJAX Message</button>
    <button id="test TTS" onclick="testTTS2()">test TTS</button>
    <button id="test cycle" onclick="cycle()">test cycle</button>
    <button id="startSeq" onclick="startSeq()">startSequence</button>
    <button id="endSeq" onclick="endSeq()">end sequence</button>




    <div id="response"></div>

    <!-- <script src="script.js"></script> -->
    <script>
        function testTTS() {
            /* const textToSpeak = 'This is some text to be spoken.';
            const desiredLanguage = 'en-US'; // Example language code (English - US) */

            const textToSpeak = 'Здесь вкусный кофе';
            const desiredLanguage = "ru-RU"

            var seqOn = false;

            // Create a SpeechSynthesisUtterance object
            const utterance = new SpeechSynthesisUtterance();
            utterance.text = textToSpeak;
            utterance.lang = desiredLanguage;

            // Optionally set other properties like pitch, rate, and voice
            // utterance.pitch = 1; // Adjust pitch (1 is default)
            // utterance.rate = 1; // Adjust speaking rate (1 is default)

            // Get available voices (optional)
            const voices = speechSynthesis.getVoices();
            console.log('Available voices:', voices); // You can choose a specific voice here

            utterance.onend = function(event) {
                console.log('Speech completed!');
                // Perform any actions after speech finishes
            };   

            // Speak the utterance
            speechSynthesis.speak(utterance);
        }

        function testTTS2(){
            speak('same as it ever was, there is always the sun', 'en-US',
                ()=>{consoe.log("call back called back");}
            );
        }


        function speak(textToSpeak, desiredLanguage, doAfter){
            /* const textToSpeak = 'This is some text to be spoken.';
            const desiredLanguage = 'en-US'; // Example language code (English - US) */



            // Create a SpeechSynthesisUtterance object
            const utterance = new SpeechSynthesisUtterance();
            utterance.text = textToSpeak;
            utterance.lang = desiredLanguage;

            // Optionally set other properties like pitch, rate, and voice
            // utterance.pitch = 1; // Adjust pitch (1 is default)
            // utterance.rate = 1; // Adjust speaking rate (1 is default)

            // Get available voices (optional)
            const voices = speechSynthesis.getVoices();
            console.log('Available voices:', voices); // You can choose a specific voice here

            utterance.onend = function(event) {
                console.log('Speech completed!');
                doAfter();
                // Perform any actions after speech finishes
            };   

            // Speak the utterance
            speechSynthesis.speak(utterance);
        }

        function startSeq(){
            seqOn = true;
            nextCycle();
        }
        function endSeq(){
            seqOn = false;
        }

        function testSendAjax() {
            const xhr = new XMLHttpRequest();
            xhr.open('GET', '/ajaxTest'); // Replace with your actual endpoint
            xhr.onload = function () {
                if (xhr.status === 200) {
                    //responseDiv.textContent = xhr.responseText;
                    console.log(xhr.responseText);
                } else {
                    //responseDiv.textContent = 'Error: ' + xhr.statusText;
                    console.log( 'Error: ' + xhr.statusText);
                }
            };
            xhr.send();
        }

        function cycle(after) {
            const xhr = new XMLHttpRequest();
            xhr.open('GET', '/simpleCycle'); // Replace with your actual endpoint
            xhr.onload = function () {
                if (xhr.status === 200) {
                    //responseDiv.textContent = xhr.responseText;
                    console.log(xhr.responseText);
                    after();
                } else {
                    //responseDiv.textContent = 'Error: ' + xhr.statusText;
                    console.log( 'Error: ' + xhr.statusText);
                }
            };
            xhr.send();
        }

        function nextCycle(){
            if(seqOn){
                    console.log("----");
                    setTimeout(cycle.bind(null, nextCycle), 400);
            }
           
        }


    </script>
</body>

</html>